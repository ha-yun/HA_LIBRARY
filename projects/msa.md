# Netflix MSA(Microservices Architecture)
- Netflix는 **MSA(마이크로서비스 아키텍처)**를 가장 성공적으로 도입한 기업 중 하나🎬
- 기존의 모놀리식 아키텍처에서 벗어나 독립적인 마이크로서비스로 시스템을 분리하여 운영

## 마이크로서비스 아키텍처
- ✅ 애플리케이션을 독립적인 작은 서비스(마이크로서비스) 단위로 쪼개서 운영
- ✅ 각 서비스는 독립적으로 배포, 확장, 유지보수 가능
- ✅ Netflix는 1000개 이상의 마이크로서비스를 운영하고 있음

-  💡 장점
    - 확장성(Scalability) 높음 → 필요한 서비스만 확장 가능
    - 빠른 배포 및 개발 가능 → 팀별로 독립적으로 개발 & 배포
    - 장애 격리 가능 → 하나의 서비스 장애가 전체 시스템에 영향 안 줌

- ⚠️ 단점:
    - 서비스 간 통신 복잡 → 네트워크 비용 증가
    - 데이터 일관성 문제 → 각 서비스가 독립적인 DB를 가짐
    - 모니터링 어려움 → 서비스가 많아지면 장애 추적 어려움

## Netflix의 MSA 주요 구성 요소
1. 서비스 디스커버리 – Eureka
    - 서비스가 동적으로 추가/삭제되므로 Eureka가 서비스 위치를 관리
    - 마이크로서비스들이 Eureka 서버에서 다른 서비스 위치를 조회
    - Netflix가 직접 개발한 오픈소스 서비스 디스커버리 도구

2. API Gateway – Zuul
- 모든 클라이언트 요청을 한 곳에서 받아 라우팅하는 역할
- 요청을 적절한 마이크로서비스로 전달
- 로드 밸런싱, 인증, 로깅, 보안 등 기능 포함

3. 클라이언트 사이드 로드 밸런싱 – Ribbon
- Zuul이 마이크로서비스에 요청을 전달할 때 Ribbon을 사용하여 부하 분산
- Netflix의 클라이언트 사이드 로드 밸런서

4. 장애 복구 – Hystrix
- 마이크로서비스에서 서버 장애 발생 시 자동으로 대체 경로 제공
- Circuit Breaker(서킷 브레이커) 패턴 적용 → 장애 감지 시 요청 차단

5. 분산 트레이싱 – Zipkin
- 서비스 간의 요청을 추적하여 장애 원인을 파악하는 도구
- 마이크로서비스 환경에서는 요청이 여러 서비스로 전달되기 때문에 필수

6. 데이터 관리 – Cassandra
- Netflix는 분산 데이터베이스인 Apache Cassandra를 사용
- NoSQL 기반으로 확장성이 뛰어나며, 마이크로서비스에 적합

7. 배포 자동화 – Spinnaker
- Netflix에서 직접 개발한 CI/CD(지속적 통합/배포) 도구
- 버전 롤백 및 블루-그린 배포 지원


## Netflix MSA 흐름
1. 사용자가 API Gateway(🔹Zuul)로 요청
2. Zuul이 Eureka에서 서비스 위치 확인 후 해당 마이크로서비스에 요청 전달
3. 마이크로서비스들은 Ribbon을 통해 부하 분산하여 응답
4. Hystrix를 사용해 장애 감지 및 복구
5. Zipkin을 활용하여 서비스 간 트랜잭션 추적
6. 데이터는 Cassandra에서 관리
7. Spinnaker로 지속적인 배포 자동화